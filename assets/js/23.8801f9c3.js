(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{449:function(e,a,s){"use strict";s.r(a);var t=s(17),n=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"keep-aliveåˆ†äº«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keep-aliveåˆ†äº«"}},[e._v("#")]),e._v(" keep-aliveåˆ†äº«")]),e._v(" "),s("blockquote",[s("p",[e._v("æŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶é“¾ä¸­ã€‚")])]),e._v(" "),s("h2",{attrs:{id:"ç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç‰¹æ€§"}},[e._v("#")]),e._v(" ç‰¹æ€§")]),e._v(" "),s("ul",[s("li",[e._v("åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚")]),e._v(" "),s("li",[e._v("å½“ç»„ä»¶åœ¨ "),s("keep-alive",[e._v(" å†…è¢«åˆ‡æ¢ï¼Œå®ƒçš„ activated å’Œ deactivated è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å°†ä¼šè¢«å¯¹åº”æ‰§è¡Œï¼Œä¸” activated å’Œ deactivated å°†ä¼šåœ¨ "),s("keep-alive",[e._v(" æ ‘å†…çš„æ‰€æœ‰åµŒå¥—ç»„ä»¶ä¸­è§¦å‘ã€‚")])],1)],1),e._v(" "),s("li",[e._v("ä¸ä¼šåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰ç¼“å­˜å®ä¾‹ã€‚")])]),e._v(" "),s("h2",{attrs:{id:"ä½œç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½œç”¨"}},[e._v("#")]),e._v(" ä½œç”¨")]),e._v(" "),s("ul",[s("li",[e._v("ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚")])]),e._v(" "),s("h2",{attrs:{id:"ç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹"}},[e._v("#")]),e._v(" ç¼ºç‚¹")]),e._v(" "),s("ul",[s("li",[e._v("å¸¸é©»å†…å­˜å½±å“æ€§èƒ½")]),e._v(" "),s("li",[e._v("keep-aliveä¸èƒ½ç¼“å­˜å¤šå±‚çº§è·¯ç”±èœå•é—®é¢˜")])]),e._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" api")]),e._v(" "),s("ul",[s("li",[e._v("include - é€—å·åˆ†éš”å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„ã€‚åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ã€‚")]),e._v(" "),s("li",[e._v("exclude - é€—å·åˆ†éš”å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„ã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ã€‚")]),e._v(" "),s("li",[e._v("max - æ•°å­—ã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚")])]),e._v(" "),s("h3",{attrs:{id:"ä¸¾ä¸ªğŸŒ°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¾ä¸ªğŸŒ°"}},[e._v("#")]),e._v(" ä¸¾ä¸ªğŸŒ°")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('    <keep-alive :include="Home" :exclude="blackList" :max="amount">\n        <component :is="currentComponent"></component>\n    </keep-alive>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("h2",{attrs:{id:"åŸç†ç²—è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸç†ç²—è§£"}},[e._v("#")]),e._v(" åŸç†ç²—è§£")]),e._v(" "),s("h3",{attrs:{id:"keep-alive-æ–¹æ³•å®šä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keep-alive-æ–¹æ³•å®šä¹‰"}},[e._v("#")]),e._v(" keep-alive æ–¹æ³•å®šä¹‰")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("    // src/core/components/keep-alive.js\n    export default {\n      name: 'keep-alive',\n      abstract: true, // åˆ¤æ–­å½“å‰ç»„ä»¶è™šæ‹Ÿdomæ˜¯å¦æ¸²æŸ“æˆçœŸæ˜¯domçš„å…³é”®ï¼ˆVueåœ¨åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ï¼Œä¸ºç»„ä»¶å®ä¾‹å»ºç«‹çˆ¶å­å…³ç³»ä¼šæ ¹æ®abstractå±æ€§å†³å®šæ˜¯å¦å¿½ç•¥æŸä¸ªç»„ä»¶ï¼‰\n\n      props: {\n        include: patternTypes, // ç¼“å­˜ç™½åå•\n        exclude: patternTypes, // ç¼“å­˜é»‘åå•\n        max: [String, Number] // ç¼“å­˜çš„ç»„ä»¶å®ä¾‹æ•°é‡ä¸Šé™\n      },\n\n      created () {\n        this.cache = Object.create(null) // ç¼“å­˜è™šæ‹Ÿdom\n        this.keys = [] // ç¼“å­˜çš„è™šæ‹Ÿdomçš„å¥é›†åˆ\n      },\n\n      destroyed () {\n        for (const key in this.cache) { // åˆ é™¤æ‰€æœ‰çš„ç¼“å­˜\n          pruneCacheEntry(this.cache, key, this.keys)\n        }\n      },\n\n      mounted () {\n        // å®æ—¶ç›‘å¬é»‘ç™½åå•çš„å˜åŠ¨\n        this.$watch('include', val => {\n          pruneCache(this, name => matches(val, name))\n        })\n        this.$watch('exclude', val => {\n          pruneCache(this, name => !matches(val, name))\n        })\n      },\n\n      render () {\n        // å…ˆçœç•¥...\n      }\n    }\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br")])]),s("h3",{attrs:{id:"ç¼“å­˜è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜è¿‡ç¨‹"}},[e._v("#")]),e._v(" ç¼“å­˜è¿‡ç¨‹")]),e._v(" "),s("blockquote",[s("p",[e._v("init -> $mount -> compile -> render -> vnode -> patch -> dom")])]),e._v(" "),s("ol",[s("li",[e._v("keep-aliveçš„æ¸²æŸ“æ˜¯åœ¨patché˜¶æ®µï¼Œè¿™æ˜¯æ„å»ºç»„ä»¶æ ‘ï¼ˆè™šæ‹ŸDOMæ ‘ï¼‰ï¼Œå¹¶å°†VNodeè½¬æ¢æˆçœŸæ­£DOMèŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚")]),e._v(" "),s("li",[e._v("åœ¨patché˜¶æ®µï¼Œä¼šæ‰§è¡ŒcreateComponentå‡½æ•°ã€‚keep-aliveç»„ä»¶ä½œä¸ºçˆ¶ç»„ä»¶ï¼Œå®ƒçš„renderå‡½æ•°ä¼šå…ˆäºè¢«åŒ…è£¹ç»„ä»¶æ‰§è¡Œï¼›é‚£ä¹ˆå°±åªæ‰§è¡Œæ—¶è§£æé“keepAliveçš„å€¼æ˜¯trueï¼Œåé¢çš„é€»è¾‘ä¸å†æ‰§è¡Œï¼›å†æ¬¡è®¿é—®è¢«åŒ…è£¹ç»„ä»¶æ—¶ï¼Œæ˜¯å·²ç»ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ä¼šæ‰§è¡Œinserté€»è¾‘ï¼Œè¿™æ ·å°±ç›´æ¥æŠŠä¸Šä¸€æ¬¡çš„DOMæ’å…¥åˆ°äº†çˆ¶å…ƒç´ ä¸­ã€‚")]),e._v(" "),s("li",[e._v("ä¸€èˆ¬çš„ç»„ä»¶ï¼Œæ¯ä¸€æ¬¡åŠ è½½éƒ½ä¼šæœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå³ç”Ÿå‘½å‘¨æœŸé‡Œé¢å¯¹åº”çš„é’©å­å‡½æ•°éƒ½ä¼šè¢«è§¦å‘ï¼Œè€Œkeep-aliveåŒ…è£¹çš„ç»„ä»¶ä¸å†è¿›å…¥$mountè¿‡ç¨‹")]),e._v(" "),s("li",[e._v("æ‰§è¡Œinserté€»è¾‘æ—¶ä¼šè°ƒç”¨äº†activateChildComponentå‡½æ•°é€’å½’åœ°å»æ‰§è¡Œæ‰€æœ‰å­ç»„ä»¶çš„activatedé’©å­å‡½æ•°ã€‚")])]),e._v(" "),s("h2",{attrs:{id:"å‚è€ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[e._v("#")]),e._v(" å‚è€ƒ")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/post/5cce49036fb9a031eb58a8f9#heading-7",target:"_blank",rel:"noopener noreferrer"}},[e._v("å½»åº•æ­ç§˜keep-aliveåŸç†"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.im/post/5b407c2a6fb9a04fa91bcf0d#heading-5",target:"_blank",rel:"noopener noreferrer"}},[e._v("keep-aliveç»„ä»¶çº§ç¼“å­˜"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);